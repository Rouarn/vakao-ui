# Vakao UI åŒ…å‘å¸ƒæŒ‡å—

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•å‘å¸ƒ Vakao UI ç»„ä»¶åº“çš„å„ä¸ªåŒ…åˆ°ç§æœ‰åˆ¶å“ä»“åº“ã€‚

## ç¯å¢ƒå‡†å¤‡

### 1. å®‰è£…ä¾èµ–

ç¡®ä¿é¡¹ç›®ä¾èµ–å·²å®‰è£…ï¼š
```bash
npm install
```

### 2. ç§æœ‰åˆ¶å“ä»“åº“é…ç½®

#### è®¾ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶æˆ–è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼š

```bash
# ç§æœ‰åˆ¶å“ä»“åº“åœ°å€
NPM_REGISTRY=http://your-private-registry.com/repository/npm-private/

# è®¤è¯ä»¤ç‰Œï¼ˆå¯é€‰ï¼Œå¦‚æœä»“åº“éœ€è¦è®¤è¯ï¼‰
NPM_TOKEN=your-auth-token
```

#### é…ç½® npm è®¤è¯

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨ .npmrc æ–‡ä»¶**

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.npmrc` æ–‡ä»¶ï¼š
```
registry=http://your-private-registry.com/repository/npm-private/
//your-private-registry.com/repository/npm-private/:_authToken=your-auth-token
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨ npm login**
```bash
npm login --registry=http://your-private-registry.com/repository/npm-private/
```

**æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ npm config**
```bash
npm config set registry http://your-private-registry.com/repository/npm-private/
npm config set //your-private-registry.com/repository/npm-private/:_authToken your-auth-token
```

## å‘å¸ƒæµç¨‹

### ç»Ÿä¸€å‘å¸ƒç³»ç»Ÿ (æ¨è)

Vakao UI ç°åœ¨ä½¿ç”¨ç»Ÿä¸€çš„å‘å¸ƒç³»ç»Ÿï¼Œæä¾›æ›´å¼ºå¤§å’Œä¾¿æ·çš„å‘å¸ƒç®¡ç†åŠŸèƒ½ã€‚

#### äº¤äº’å¼å‘å¸ƒï¼ˆæ¨èï¼‰
```bash
node scripts/publish.js
```

#### å‘½ä»¤è¡Œå‚æ•°å‘å¸ƒ

**å‘å¸ƒæŒ‡å®šåŒ…ï¼š**
```bash
# å‘å¸ƒå¤šä¸ªåŒ…
node scripts/publish.js --packages hooks,utils

# å‘å¸ƒå•ä¸ªåŒ…
node scripts/publish.js --package hooks
```

**æµ‹è¯•æ¨¡å¼ï¼š**
```bash
node scripts/publish.js --dry-run
```

**åŒæ­¥ç‰ˆæœ¬å·ï¼š**
```bash
node scripts/publish.js --sync-version
```

**æŸ¥çœ‹å¸®åŠ©ï¼š**
```bash
node scripts/publish.js --help
```

#### NPM è„šæœ¬å¿«æ·æ–¹å¼

ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œé¡¹ç›®æä¾›äº†é¢„å®šä¹‰çš„ npm è„šæœ¬ï¼š

**äº¤äº’å¼å‘å¸ƒï¼š**
```bash
npm run publish
```

**å‘å¸ƒå•ä¸ªåŒ…ï¼š**
```bash
# å‘å¸ƒä¸»åŒ…ï¼ˆç»„ä»¶åº“ï¼‰
npm run publish:main
npm run publish:main:dry-run

# å‘å¸ƒ hooks åŒ…
npm run publish:hooks
npm run publish:hooks:dry-run

# å‘å¸ƒ utils åŒ…
npm run publish:utils
npm run publish:utils:dry-run
```

**æ‰¹é‡å‘å¸ƒï¼š**
```bash
# å‘å¸ƒæ‰€æœ‰åŒ…
npm run publish:all
npm run publish:all:dry-run

# åŒæ­¥ç‰ˆæœ¬å·å‘å¸ƒ
npm run publish:sync
npm run publish:sync:dry-run
```

**æµ‹è¯•æ¨¡å¼ï¼š**
```bash
npm run publish:dry-run
```

### æ–°ç³»ç»Ÿç‰¹æ€§

- ğŸ¯ **ç»Ÿä¸€å‘å¸ƒå…¥å£**: ä½¿ç”¨å•ä¸€è„šæœ¬ç®¡ç†æ‰€æœ‰åŒ…çš„å‘å¸ƒ
- ğŸ”§ **æ¨¡å—åŒ–æ¶æ„**: æ ¸å¿ƒå¼•æ“ã€äº¤äº’ç•Œé¢ã€é…ç½®ç®¡ç†åˆ†ç¦»
- ğŸ“¦ **æ‰¹é‡å‘å¸ƒ**: æ”¯æŒåŒæ—¶å‘å¸ƒå¤šä¸ªåŒ…
- ğŸ”„ **ç‰ˆæœ¬åŒæ­¥**: å¯é€‰æ‹©åŒæ­¥æ‰€æœ‰åŒ…çš„ç‰ˆæœ¬å·
- ğŸ§ª **æµ‹è¯•æ¨¡å¼**: å®Œæ•´çš„ dry-run æ”¯æŒ
- ğŸ¢ **ç§æœ‰ä»“åº“**: å®Œæ•´çš„ç§æœ‰åˆ¶å“ä»“åº“æ”¯æŒ
- ğŸ¨ **äº¤äº’å¼ç•Œé¢**: å‹å¥½çš„ç”¨æˆ·äº¤äº’ä½“éªŒ

## å‘å¸ƒæ­¥éª¤è¯¦è§£

### 1. é€‰æ‹©å‘å¸ƒæ¨¡å¼

è¿è¡Œå‘å¸ƒè„šæœ¬åï¼Œç³»ç»Ÿä¼šæä¾›ä»¥ä¸‹é€‰é¡¹ï¼š

- **äº¤äº’å¼é€‰æ‹©**: æ‰‹åŠ¨é€‰æ‹©è¦å‘å¸ƒçš„åŒ…
- **å…¨éƒ¨å‘å¸ƒ**: å‘å¸ƒæ‰€æœ‰å¯ç”¨çš„åŒ…
- **æŒ‡å®šåŒ…å‘å¸ƒ**: é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šåŒ…

### 2. ç‰ˆæœ¬ç®¡ç†

ç³»ç»Ÿæ”¯æŒä¸¤ç§ç‰ˆæœ¬ç®¡ç†æ¨¡å¼ï¼š

- **åŒæ­¥ç‰ˆæœ¬**: æ‰€æœ‰åŒ…ä½¿ç”¨ç›¸åŒçš„ç‰ˆæœ¬å·
- **ç‹¬ç«‹ç‰ˆæœ¬**: æ¯ä¸ªåŒ…å¯ä»¥æœ‰ä¸åŒçš„ç‰ˆæœ¬å·

### 3. æ„å»ºå’Œå‘å¸ƒ

å¯¹äºæ¯ä¸ªé€‰ä¸­çš„åŒ…ï¼Œç³»ç»Ÿä¼šï¼š

1. æ£€æŸ¥å½“å‰ç‰ˆæœ¬
2. æç¤ºè¾“å…¥æ–°ç‰ˆæœ¬å·
3. æ›´æ–° package.json
4. æ‰§è¡Œæ„å»ºå‘½ä»¤
5. å‡†å¤‡å‘å¸ƒæ–‡ä»¶
6. å‘å¸ƒåˆ°åˆ¶å“ä»“åº“

## å¯å‘å¸ƒçš„åŒ…

å½“å‰æ”¯æŒå‘å¸ƒçš„åŒ…ï¼š

- **vakao-ui**: ç»„ä»¶åº“ä¸»åŒ…ï¼ˆåŒ…å«æ‰€æœ‰ç»„ä»¶ï¼‰
- **@vakao-ui/hooks**: Vue 3 ç»„åˆå¼å‡½æ•°åº“
- **@vakao-ui/utils**: é€šç”¨å·¥å…·å‡½æ•°åº“

## ç‰ˆæœ¬è§„èŒƒ

å»ºè®®éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/) è§„èŒƒï¼š

- **ä¸»ç‰ˆæœ¬å·**: ä¸å…¼å®¹çš„ API ä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·**: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å·**: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

ç¤ºä¾‹ï¼š
- `1.0.0` â†’ `1.0.1` (ä¿®å¤ bug)
- `1.0.1` â†’ `1.1.0` (æ–°å¢åŠŸèƒ½)
- `1.1.0` â†’ `2.0.0` (ç ´åæ€§æ›´æ”¹)

## æµ‹è¯•æ¨¡å¼

åœ¨æ­£å¼å‘å¸ƒå‰ï¼Œå»ºè®®ä½¿ç”¨æµ‹è¯•æ¨¡å¼éªŒè¯ï¼š

```bash
node scripts/publish.js --dry-run
```

æµ‹è¯•æ¨¡å¼ä¼šæ‰§è¡Œæ‰€æœ‰æ­¥éª¤ä½†ä¸ä¼šå®é™…å‘å¸ƒï¼Œç”¨äºï¼š
- éªŒè¯æ„å»ºè¿‡ç¨‹
- æ£€æŸ¥ç‰ˆæœ¬å·
- ç¡®è®¤å‘å¸ƒé…ç½®

## æ•…éšœæ’é™¤

### ç§æœ‰ä»“åº“ç›¸å…³é—®é¢˜

**é—®é¢˜1: è®¤è¯å¤±è´¥**
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $NPM_REGISTRY
echo $NPM_TOKEN

# é‡æ–°é…ç½®è®¤è¯
npm login --registry=http://your-private-registry.com/repository/npm-private/
```

**é—®é¢˜2: ä»“åº“è¿æ¥å¤±è´¥**
```bash
# æµ‹è¯•ä»“åº“è¿æ¥
npm ping --registry=http://your-private-registry.com/repository/npm-private/

# æ£€æŸ¥ç½‘ç»œå’Œé˜²ç«å¢™è®¾ç½®
curl -I http://your-private-registry.com/repository/npm-private/
```

**é—®é¢˜3: é‡æ–°é…ç½®è®¤è¯**
```bash
# æ¸…é™¤ç°æœ‰é…ç½®
npm config delete registry
npm config delete //your-private-registry.com/repository/npm-private/:_authToken

# é‡æ–°è®¾ç½®
npm config set registry http://your-private-registry.com/repository/npm-private/
npm login --registry=http://your-private-registry.com/repository/npm-private/
```

### å¸¸è§é—®é¢˜

**é—®é¢˜1: ç‰ˆæœ¬å·å·²å­˜åœ¨**
- æ£€æŸ¥è¿œç¨‹ä»“åº“ä¸­çš„ç‰ˆæœ¬
- ä½¿ç”¨æ›´é«˜çš„ç‰ˆæœ¬å·
- ç¡®è®¤æ˜¯å¦éœ€è¦æ›´æ–°ç°æœ‰ç‰ˆæœ¬

**é—®é¢˜2: æ„å»ºå¤±è´¥**
- æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…å®Œæ•´
- ç¡®è®¤æ„å»ºå‘½ä»¤æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

**é—®é¢˜3: æƒé™ä¸è¶³**
- ç¡®è®¤è´¦æˆ·æœ‰å‘å¸ƒæƒé™
- æ£€æŸ¥åŒ…åæ˜¯å¦è¢«å ç”¨
- è”ç³»ä»“åº“ç®¡ç†å‘˜

## æœ€ä½³å®è·µ

1. **å‘å¸ƒå‰æ£€æŸ¥**
   - ç¡®ä¿ä»£ç å·²æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
   - è¿è¡Œæµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸
   - æ›´æ–° CHANGELOG.md

2. **ç‰ˆæœ¬ç®¡ç†**
   - éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ
   - ä¿æŒç‰ˆæœ¬å·çš„ä¸€è‡´æ€§
   - åŠæ—¶æ›´æ–°ä¾èµ–ç‰ˆæœ¬

3. **æµ‹è¯•éªŒè¯**
   - ä½¿ç”¨ dry-run æ¨¡å¼é¢„æ£€æŸ¥
   - åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯å‘å¸ƒåŒ…
   - ç¡®è®¤åŒ…çš„å®Œæ•´æ€§

4. **æ–‡æ¡£ç»´æŠ¤**
   - åŠæ—¶æ›´æ–° README.md
   - ç»´æŠ¤ API æ–‡æ¡£
   - è®°å½•é‡è¦å˜æ›´

## è¿ç§»è¯´æ˜

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨çš„æ˜¯æ—§ç‰ˆå‘å¸ƒè„šæœ¬ï¼Œè¯·æŸ¥çœ‹ `scripts/legacy/MIGRATION_GUIDE.md` äº†è§£è¯¦ç»†çš„è¿ç§»æŒ‡å—ã€‚

æ—§è„šæœ¬å·²ç§»åŠ¨åˆ° `scripts/legacy/` ç›®å½•ï¼Œæ–°ç³»ç»Ÿæä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œæ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚

---

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³» Vakao UI å›¢é˜Ÿã€‚