# Vakao UI Publisher GUI

一个基于 Electron 的图形化发布工具，为 Vakao UI 组件库提供直观易用的包管理和发布界面。

## 🚀 功能特性

### 📦 包管理
- **可视化包选择**: 通过图形界面选择要发布的包
- **包信息展示**: 显示包的版本、描述、依赖关系等详细信息
- **批量操作**: 支持同时选择多个包进行发布
- **版本同步**: 可选择是否同步所有包的版本号

### 🔧 发布管理
- **交互式发布**: 图形化的发布流程，无需记忆复杂命令
- **试运行模式**: 支持 `--dry-run` 模式，预览发布操作而不实际执行
- **部署策略**: 支持多种部署策略（文档、GitHub Pages、静态文件）
- **命令预览**: 在执行前预览将要运行的命令

### 📊 实时监控
- **实时日志**: 实时显示发布过程中的输出和错误信息
- **进程状态**: 监控发布进程的运行状态
- **状态指示**: 直观的状态栏显示当前操作状态
- **桌面通知**: 发布完成或出错时的系统通知

### 🎨 用户体验
- **现代化界面**: 基于现代设计语言的清爽界面
- **主题切换**: 支持浅色和深色主题
- **响应式设计**: 适配不同屏幕尺寸
- **键盘快捷键**: 提供常用操作的快捷键支持

### 🛠️ 开发工具
- **日志导出**: 支持导出发布日志用于问题排查
- **目录快速访问**: 一键打开项目目录、包目录等
- **设置管理**: 可配置的应用设置和偏好

## 📋 系统要求

- **操作系统**: Windows 10+, macOS 10.14+, Linux (Ubuntu 18.04+)
- **Node.js**: 16.0.0 或更高版本
- **npm**: 7.0.0 或更高版本
- **内存**: 至少 512MB 可用内存
- **磁盘空间**: 至少 200MB 可用空间

## 🔧 安装和使用

### 开发环境设置

1. **进入 GUI 目录**:
   ```bash
   cd scripts/gui
   ```

2. **安装依赖**:
   ```bash
   npm install
   ```

3. **启动开发模式**:
   ```bash
   npm run dev
   ```

### 构建和分发

1. **构建应用**:
   ```bash
   npm run build
   ```

2. **构建 Windows 版本**:
   ```bash
   npm run build:win
   ```

3. **构建 macOS 版本**:
   ```bash
   npm run build:mac
   ```

4. **构建 Linux 版本**:
   ```bash
   npm run build:linux
   ```

构建完成后，可执行文件将位于 `dist` 目录中。

## 📖 使用指南

### 基本操作流程

1. **启动应用**: 双击可执行文件或运行 `npm run dev`
2. **选择包**: 在「发布管理」标签页中选择要发布的包
3. **配置选项**: 设置发布选项（试运行、版本同步、部署策略等）
4. **预览命令**: 点击发布按钮，预览将要执行的命令
5. **执行发布**: 确认命令无误后，点击执行按钮开始发布
6. **监控进度**: 在「日志查看」标签页中实时监控发布进度

### 界面说明

#### 🏠 发布管理
- **包选择区域**: 显示所有可发布的包，点击选择
- **发布选项**: 配置发布参数
  - `试运行模式`: 预览发布操作而不实际执行
  - `版本同步`: 所有包使用相同的版本号
  - `跳过部署`: 仅发布包，不执行部署操作
  - `部署策略`: 选择部署目标（自动、文档、GitHub Pages、静态文件）
- **发布按钮**: 开始发布流程

#### 📦 包管理
- **包概览**: 显示所有包的详细信息
- **快速操作**: 打开包目录、构建包等
- **刷新按钮**: 重新加载包信息

#### 🚀 部署管理
- **部署选项**: 提供不同的部署策略
  - `部署文档`: 构建并部署文档到 GitHub Pages
  - `GitHub Pages`: 部署到 GitHub Pages
  - `静态文件`: 生成静态文件

#### 📋 日志查看
- **实时日志**: 显示发布过程中的所有输出
- **日志类型**: 区分不同类型的日志（信息、成功、警告、错误）
- **日志操作**: 清空日志、导出日志文件

#### ⚙️ 设置
- **主题设置**: 切换浅色/深色主题
- **行为设置**: 配置自动滚动、通知等
- **应用信息**: 查看应用版本和系统信息

### 键盘快捷键

- `Ctrl/Cmd + R`: 刷新包信息
- `Ctrl/Cmd + Enter`: 执行发布（在发布管理页面）
- `Escape`: 关闭模态框
- `F12`: 打开开发者工具（开发模式）

## 🏗️ 技术架构

### 技术栈

- **框架**: Electron 25+
- **前端**: HTML5 + CSS3 + Vanilla JavaScript
- **图标**: Font Awesome 6
- **构建工具**: Electron Builder
- **包管理**: npm

### 项目结构

```
scripts/gui/
├── package.json              # 项目配置和依赖
├── README.md                 # 项目文档
├── src/                      # 源代码目录
│   ├── main.js              # Electron 主进程
│   ├── preload.js           # 预加载脚本
│   └── renderer/            # 渲染进程
│       ├── index.html       # 主页面
│       ├── styles.css       # 样式文件
│       └── renderer.js      # 渲染进程脚本
├── assets/                   # 资源文件
│   └── icons/               # 应用图标
└── dist/                    # 构建输出目录
```

### 架构设计

#### 主进程 (main.js)
- 窗口管理和生命周期控制
- IPC 通信处理
- 文件系统操作
- 子进程管理（执行发布命令）
- 系统集成（通知、对话框等）

#### 渲染进程 (renderer.js)
- 用户界面逻辑
- 状态管理
- 事件处理
- 与主进程通信

#### 预加载脚本 (preload.js)
- 安全的 API 暴露
- 主进程和渲染进程之间的桥梁
- 遵循 Electron 安全最佳实践

## 🔒 安全考虑

- **上下文隔离**: 启用 `contextIsolation` 确保渲染进程安全
- **Node.js 集成**: 在渲染进程中禁用 Node.js 集成
- **预加载脚本**: 通过 `contextBridge` 安全暴露 API
- **CSP**: 实施内容安全策略防止 XSS 攻击
- **权限最小化**: 仅暴露必要的系统 API

## 🐛 故障排除

### 常见问题

#### 应用无法启动
- 检查 Node.js 版本是否符合要求
- 确保所有依赖已正确安装
- 查看控制台错误信息

#### 发布命令执行失败
- 检查项目根目录是否正确
- 确认发布脚本存在且可执行
- 查看日志输出中的错误信息

#### 界面显示异常
- 尝试刷新应用 (`Ctrl/Cmd + R`)
- 检查是否有 JavaScript 错误
- 重启应用

#### 包信息加载失败
- 确认项目结构正确
- 检查 `package-configs.js` 文件
- 验证包目录和文件权限

### 调试模式

在开发模式下，可以使用以下调试功能：

1. **开发者工具**: 按 `F12` 打开
2. **控制台日志**: 查看详细的调试信息
3. **IPC 通信**: 监控主进程和渲染进程之间的通信
4. **内存使用**: 监控应用内存使用情况

### 日志文件

应用会在以下位置生成日志文件：

- **Windows**: `%APPDATA%/vakao-ui-publisher/logs/`
- **macOS**: `~/Library/Logs/vakao-ui-publisher/`
- **Linux**: `~/.local/share/vakao-ui-publisher/logs/`

## 🤝 贡献指南

### 开发环境

1. Fork 项目仓库
2. 创建功能分支: `git checkout -b feature/new-feature`
3. 进入 GUI 目录: `cd scripts/gui`
4. 安装依赖: `npm install`
5. 启动开发模式: `npm run dev`

### 代码规范

- 使用 2 空格缩进
- 遵循 ESLint 规则
- 添加适当的注释
- 保持代码简洁和可读性

### 提交规范

- 使用清晰的提交信息
- 遵循 [Conventional Commits](https://conventionalcommits.org/) 规范
- 每个提交应该是一个逻辑单元

### 测试

在提交代码前，请确保：

- 应用能够正常启动
- 所有功能正常工作
- 没有控制台错误
- 界面在不同主题下正常显示

## 📄 许可证

本项目采用 MIT 许可证。详见 [LICENSE](../../LICENSE) 文件。

## 🙏 致谢

- [Electron](https://electronjs.org/) - 跨平台桌面应用框架
- [Font Awesome](https://fontawesome.com/) - 图标库
- [Electron Builder](https://www.electron.build/) - 应用打包工具

## 📞 支持

如果您在使用过程中遇到问题或有建议，请：

1. 查看本文档的故障排除部分
2. 搜索已有的 [Issues](https://github.com/your-repo/issues)
3. 创建新的 Issue 描述问题
4. 联系维护者获取帮助

---

**Vakao UI Publisher GUI** - 让包发布变得简单高效！ 🚀