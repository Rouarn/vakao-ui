<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self';"
    />
    <title>Vakao UI Publisher</title>
    <link rel="stylesheet" href="./css/styles.css" />
    <link rel="stylesheet" href="./css/jquery-enhancements.css" />
    <link rel="stylesheet" href="./css/all.min.css" />
  </head>
  <body>
    <div id="app">
      <!-- 标题栏 -->
      <header class="header">
        <div class="header-left">
          <button class="mobile-menu-toggle" id="mobileMenuToggle" title="菜单">
            <i class="fas fa-bars"></i>
          </button>
          <div class="logo">
            <i class="fas fa-cube"></i>
            <span>Vakao UI Publisher</span>
          </div>
        </div>
        <div class="header-right">
          <button class="btn btn-icon" id="settingsBtn" title="设置">
            <i class="fas fa-cog"></i>
          </button>
          <button class="btn btn-icon" id="helpBtn" title="帮助">
            <i class="fas fa-question-circle"></i>
          </button>
        </div>
      </header>

      <!-- 移动端遮罩层 -->
      <div class="mobile-overlay" id="mobileOverlay"></div>

      <!-- 主内容区 -->
      <main class="main">
        <!-- 侧边栏 -->
        <aside class="sidebar" id="sidebar">
          <nav class="nav">
            <button class="nav-item active" data-tab="publish">
              <i class="fas fa-rocket"></i>
              <span>发布管理</span>
            </button>
            <button class="nav-item" data-tab="packages">
              <i class="fas fa-boxes"></i>
              <span>包管理</span>
            </button>
            <button class="nav-item" data-tab="deploy">
              <i class="fas fa-cloud-upload-alt"></i>
              <span>部署管理</span>
            </button>
            <button class="nav-item" data-tab="logs">
              <i class="fas fa-file-alt"></i>
              <span>日志查看</span>
            </button>
            <button class="nav-item" data-tab="settings">
              <i class="fas fa-cog"></i>
              <span>设置</span>
            </button>
          </nav>
        </aside>

        <!-- 内容区域 -->
        <section class="content">
          <!-- 发布管理页面 -->
          <div class="tab-content active" id="publish-tab">
            <div class="tab-header">
              <h2><i class="fas fa-rocket"></i> 发布管理</h2>
              <p>选择要发布的包并配置发布选项</p>
            </div>

            <div class="card">
              <div class="card-header">
                <h3>包选择</h3>
              </div>
              <div class="card-body">
                <div class="package-grid" id="packageGrid">
                  <!-- 包列表将通过 JavaScript 动态生成 -->
                </div>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <h3>发布选项</h3>
              </div>
              <div class="card-body">
                <div class="form-grid">
                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="dryRunCheck" />
                      <span class="checkmark"></span>
                      <span class="label-text">
                        <strong>测试模式</strong>
                        <small>不实际发布，仅模拟执行</small>
                      </span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="syncVersionCheck" />
                      <span class="checkmark"></span>
                      <span class="label-text">
                        <strong>同步版本</strong>
                        <small>所有包使用相同版本号</small>
                      </span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="deployCheck" />
                      <span class="checkmark"></span>
                      <span class="label-text">
                        <strong>自动部署</strong>
                        <small>发布后自动部署到服务器</small>
                      </span>
                    </label>
                  </div>

                  <div class="form-group deploy-options" style="display: none">
                    <label for="deployStrategy">部署策略:</label>
                    <select id="deployStrategy" class="form-select">
                      <option value="docs">📚 文档站点</option>
                      <option value="github-pages">🌐 GitHub Pages</option>
                      <option value="static">📦 静态资源</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div class="action-bar">
              <button class="btn btn-primary btn-large" id="publishBtn">
                <i class="fas fa-rocket"></i>
                开始发布
              </button>
              <button class="btn btn-secondary" id="previewBtn">
                <i class="fas fa-eye"></i>
                预览命令
              </button>

              <button class="btn btn-danger" id="stopBtn" style="display: none">
                <i class="fas fa-stop"></i>
                停止发布
              </button>
            </div>
          </div>

          <!-- 包管理页面 -->
          <div class="tab-content" id="packages-tab">
            <div class="tab-header">
              <h2><i class="fas fa-boxes"></i> 包管理</h2>
              <p>查看和管理项目中的所有包</p>
            </div>

            <div class="packages-overview" id="packagesOverview">
              <!-- 包概览将通过 JavaScript 动态生成 -->
            </div>
          </div>

          <!-- 部署管理页面 -->
          <div class="tab-content" id="deploy-tab">
            <div class="tab-header">
              <h2><i class="fas fa-cloud-upload-alt"></i> 部署管理</h2>
              <p>管理项目的部署配置和执行部署任务</p>
            </div>

            <div class="card">
              <div class="card-header">
                <h3>快速部署</h3>
              </div>
              <div class="card-body">
                <div class="deploy-actions">
                  <button
                    class="btn btn-primary deploy-btn"
                    data-strategy="docs"
                  >
                    <i class="fas fa-book"></i>
                    <div>
                      <strong>部署文档</strong>
                      <small>构建并部署文档站点</small>
                    </div>
                  </button>
                  <button
                    class="btn btn-primary deploy-btn"
                    data-strategy="github-pages"
                  >
                    <i class="fab fa-github"></i>
                    <div>
                      <strong>GitHub Pages</strong>
                      <small>部署到 GitHub Pages</small>
                    </div>
                  </button>
                  <button
                    class="btn btn-primary deploy-btn"
                    data-strategy="static"
                  >
                    <i class="fas fa-cloud"></i>
                    <div>
                      <strong>静态资源</strong>
                      <small>部署到 CDN</small>
                    </div>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- 日志查看页面 -->
          <div class="tab-content" id="logs-tab">
            <div class="tab-header">
              <h2><i class="fas fa-file-alt"></i> 日志查看</h2>
              <p>查看发布和部署的详细日志</p>
            </div>

            <div class="card">
              <div class="card-header">
                <h3>实时日志</h3>
                <div
                  class="log-status-indicator"
                  id="logStatusIndicator"
                  style="display: none"
                >
                  <div class="executing-spinner"></div>
                  <span class="executing-text">执行中...</span>
                </div>
                <div class="card-actions">
                  <button class="btn btn-small" id="clearLogsBtn">
                    <i class="fas fa-trash"></i>
                    清空日志
                  </button>
                  <button class="btn btn-small" id="exportLogsBtn">
                    <i class="fas fa-save"></i>
                    保存日志
                  </button>
                </div>
              </div>
              <div class="card-body">
                <div class="log-container" id="logContainer">
                  <div class="log-placeholder">
                    <i class="fas fa-info-circle"></i>
                    <p>暂无日志信息</p>
                    <small>执行发布或部署任务后，日志将在此处显示</small>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 设置页面 -->
          <div class="tab-content" id="settings-tab">
            <div class="tab-header">
              <h2><i class="fas fa-cog"></i> 设置</h2>
              <p>配置应用程序的行为和偏好</p>
            </div>

            <div class="card">
              <div class="card-header">
                <h3>常规设置</h3>
              </div>
              <div class="card-body">
                <div class="form-grid">
                  <div class="form-group">
                    <label for="themeSelect">主题:</label>
                    <select id="themeSelect" class="form-select">
                      <option value="light">浅色主题</option>
                      <option value="dark">深色主题</option>
                      <option value="auto">跟随系统</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="autoSaveCheck" />
                      <span class="checkmark"></span>
                      <span class="label-text">
                        <strong>自动保存</strong>
                        <small>自动保存配置和状态</small>
                      </span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="autoScrollCheck" />
                      <span class="checkmark"></span>
                      <span class="label-text">
                        <strong>自动滚动</strong>
                        <small>日志输出时自动滚动到底部</small>
                      </span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="notificationsCheck" />
                      <span class="checkmark"></span>
                      <span class="label-text">
                        <strong>桌面通知</strong>
                        <small>显示发布完成通知</small>
                      </span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="defaultDryRunCheck" />
                      <span class="checkmark"></span>
                      <span class="label-text">
                        <strong>默认测试模式</strong>
                        <small>启动时默认启用测试模式</small>
                      </span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <h3>项目信息</h3>
              </div>
              <div class="card-body">
                <div class="project-info" id="projectInfo">
                  <!-- 项目信息将通过 JavaScript 动态生成 -->
                </div>
              </div>
            </div>

            <div class="action-bar">
              <button class="btn btn-primary" id="saveSettingsBtn">
                <i class="fas fa-save"></i>
                保存设置
              </button>
              <button class="btn btn-secondary" id="resetSettingsBtn">
                <i class="fas fa-undo"></i>
                重置设置
              </button>
              <button class="btn btn-secondary" id="openProjectBtn">
                <i class="fas fa-folder-open"></i>
                打开项目目录
              </button>
            </div>
          </div>
        </section>
      </main>

      <!-- 状态栏 -->
      <footer class="status-bar">
        <div class="status-left">
          <span class="status-item" id="projectStatus">
            <i class="fas fa-circle status-indicator"></i>
            <span>就绪</span>
          </span>
        </div>
        <div class="status-right">
          <span class="status-item" id="versionInfo">v1.0.0</span>
        </div>
      </footer>
    </div>

    <!-- 模态框 -->
    <div class="modal" id="commandModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>命令执行</h3>
          <button class="modal-close" id="closeCommandModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="command-preview" id="commandPreview">
            <!-- 命令预览内容 -->
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="cancelCommandBtn">
            <i class="fas fa-times"></i>
            取消
          </button>
          <button class="btn btn-primary" id="executeBtn">
            <i class="fas fa-play"></i>
            执行命令
          </button>
        </div>
      </div>
    </div>

    <div class="modal" id="commandPreviewModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>命令预览</h3>
          <button class="modal-close" id="closePreviewModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="command-preview-content" id="commandPreviewContent">
            <!-- 命令预览内容 -->
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="copyCommandBtn">
            <i class="fas fa-copy"></i>
            复制命令
          </button>
          <button class="btn btn-primary" id="executeFromPreviewBtn">
            <i class="fas fa-play"></i>
            执行命令
          </button>
        </div>
      </div>
    </div>

    <!-- 帮助模态框 -->
    <div class="modal" id="helpModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>帮助信息</h3>
          <button class="modal-close" id="closeHelpModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="help-section">
            <h4><i class="fas fa-rocket"></i> 发布管理</h4>
            <p>管理项目版本发布的完整流程，支持语义化版本控制。</p>
            <ul class="help-list">
              <li>
                <strong>主版本发布：</strong>包含重大更改或不兼容的API修改
              </li>
              <li><strong>次版本发布：</strong>添加新功能但保持向后兼容</li>
              <li><strong>补丁版本发布：</strong>修复bug和小幅改进</li>
              <li><strong>测试模式：</strong>预览命令而不实际执行，确保安全</li>
              <li><strong>实时日志：</strong>监控发布进度和状态信息</li>
            </ul>
          </div>

          <div class="help-section">
            <h4><i class="fas fa-box"></i> 包管理</h4>
            <p>高效管理项目依赖和包的生命周期。</p>
            <ul class="help-list">
              <li>
                <strong>安装依赖：</strong>执行 npm install 安装所有项目依赖
              </li>
              <li><strong>更新依赖：</strong>检查并更新过时的包到最新版本</li>
              <li><strong>清理缓存：</strong>清除 npm 缓存解决依赖冲突</li>
              <li><strong>审计安全：</strong>检查依赖包的安全漏洞</li>
              <li><strong>依赖分析：</strong>查看包的依赖关系和大小</li>
            </ul>
          </div>

          <div class="help-section">
            <h4><i class="fas fa-cloud-upload-alt"></i> 部署管理</h4>
            <p>自动化部署流程，从构建到上线的完整解决方案。</p>
            <ul class="help-list">
              <li><strong>构建项目：</strong>生成优化的生产环境代码</li>
              <li>
                <strong>部署到服务器：</strong>自动上传构建结果到目标服务器
              </li>
              <li><strong>回滚版本：</strong>快速恢复到之前的稳定版本</li>
              <li><strong>环境配置：</strong>管理不同环境的配置文件</li>
              <li><strong>健康检查：</strong>部署后自动验证服务状态</li>
            </ul>
          </div>

          <div class="help-section">
            <h4><i class="fas fa-keyboard"></i> 快捷键</h4>
            <p>提高工作效率的键盘快捷键组合。</p>
            <div class="keyboard-shortcuts">
              <div class="shortcut-item">
                <span class="shortcut-desc">保存设置</span>
                <div class="shortcut-keys">
                  <span class="key">Ctrl</span>
                  <span class="key">S</span>
                </div>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-desc">刷新页面</span>
                <div class="shortcut-keys">
                  <span class="key">Ctrl</span>
                  <span class="key">R</span>
                </div>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-desc">显示帮助</span>
                <div class="shortcut-keys">
                  <span class="key">F1</span>
                </div>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-desc">关闭模态框</span>
                <div class="shortcut-keys">
                  <span class="key">Esc</span>
                </div>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-desc">复制命令</span>
                <div class="shortcut-keys">
                  <span class="key">Ctrl</span>
                  <span class="key">C</span>
                </div>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-desc">执行命令</span>
                <div class="shortcut-keys">
                  <span class="key">Ctrl</span>
                  <span class="key">Enter</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="closeHelpModalBtn">
            <i class="fas fa-check"></i>
            确定
          </button>
        </div>
      </div>
    </div>

    <!-- 加载遮罩 -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-content">
        <div class="spinner"></div>
        <p id="loadingText">正在加载...</p>
      </div>
    </div>

    <!-- 脚本 -->
    <script src="./js/jquery-3.7.1.min.js"></script>
    <script src="./renderer/renderer.js"></script>
  </body>
</html>
