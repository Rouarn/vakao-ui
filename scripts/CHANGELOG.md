# 更新日志

本文档记录 Vakao UI 脚本系统的重要更新和修复。

## [v2.0.1] - 2024-01-XX

### 🐛 Bug 修复

- **桌面通知修复**: 修复了部署失败时桌面通知不显示的问题
  - 问题原因：`publish.js` 中 `handleDeployOnly` 函数的错误处理流程直接调用 `process.exit(1)`，导致部署引擎的 `onError` 钩子未被触发
  - 解决方案：修改错误处理逻辑，通过 `throw error` 重新抛出错误，确保错误能传播并触发 `onError` 钩子
  - 影响范围：所有部署失败场景的桌面通知功能

### 📚 文档更新

- 更新 `scripts/README.md`，添加桌面通知功能说明和故障排除指南
- 更新 `scripts/extensions/README.md`，完善通知扩展的使用说明和问题排查
- 更新 `PUBLISH_GUIDE.md`，添加桌面通知相关的故障排除信息
- 新增 `scripts/CHANGELOG.md`，记录脚本系统的更新历史

### 🔧 技术改进

- 优化错误处理流程，确保扩展钩子能正确响应错误事件
- 改进通知扩展的错误处理和日志记录
- 增强部署引擎的错误传播机制

## [v2.0.0] - 2024-01-XX

### 🎉 重大更新

- **统一发布系统**: 全新的模块化发布管理系统
- **扩展架构**: 支持插件化扩展，提供钩子机制
- **智能部署**: 支持多种部署策略，智能策略过滤
- **交互优化**: 改进用户交互体验，支持批量操作

### ✨ 新功能

- 统一发布入口 (`publish.js`)
- 模块化架构设计
- 批量发布支持
- 版本同步功能
- 完整的 dry-run 测试模式
- 私有仓库支持
- 扩展系统和钩子机制
- 多种通知方式（桌面、邮件、Webhook）
- GitHub 集成扩展
- 智能部署策略过滤

### 🔧 核心组件

- **发布引擎** (`PublishEngine`): 包发布逻辑管理
- **部署引擎** (`DeploymentEngine`): 部署策略管理
- **扩展管理器** (`ExtensionManager`): 插件生命周期管理
- **交互界面** (`Interactive`): 用户交互处理
- **包配置** (`PackageConfigs`): 统一配置管理

### 🔌 内置扩展

- **GitHub 集成** (`github-integration.js`): Git 状态检查和 GitHub 集成
- **通知系统** (`notification.js`): 多渠道通知支持
- **传统部署** (`legacy-deploy.js`): 向后兼容支持

### 📦 支持的包

- `main`: Vakao UI 组件库主包
- `hooks`: Vue 3 组合式函数库
- `utils`: 通用工具函数库
- `docs`: 文档站点（仅部署）

### 🚀 部署策略

- `docs`: 文档部署
- `github-pages`: GitHub Pages 部署
- `static`: 静态资源部署
- `legacy-docs`: 传统文档部署

---

## 版本说明

- **主版本号**: 不兼容的 API 修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

## 贡献指南

如果您发现问题或有改进建议，欢迎：

1. 提交 Issue 报告问题
2. 提交 Pull Request 贡献代码
3. 完善文档和测试用例

---

*更新时间: 2024-01-XX*
*维护团队: Vakao UI Team*