# Vakao UI å‘å¸ƒæŒ‡å—

æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨æ–°ç‰ˆ Vakao UI ç»Ÿä¸€å‘å¸ƒç³»ç»Ÿæ¥å‘å¸ƒå’Œéƒ¨ç½²åŒ…ã€‚æ–°ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œé›†æˆäº†æ™ºèƒ½é€šçŸ¥ã€æ‰©å±•ç³»ç»Ÿå’Œå¤šç§éƒ¨ç½²ç­–ç•¥ã€‚

## ç¯å¢ƒå‡†å¤‡

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### ç§æœ‰åˆ¶å“ä»“åº“é…ç½®

å¦‚æœæ‚¨ä½¿ç”¨ç§æœ‰ npm ä»“åº“ï¼Œè¯·é…ç½®ç›¸åº”çš„è®¤è¯ä¿¡æ¯ï¼š

```bash
# é…ç½®ç§æœ‰ä»“åº“
npm config set registry https://your-private-registry.com/
npm config set //your-private-registry.com/:_authToken your-auth-token
```

### é€šçŸ¥ç³»ç»Ÿé…ç½®

æ–°ç‰ˆç³»ç»Ÿé›†æˆäº†æ™ºèƒ½é€šçŸ¥åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§é€šçŸ¥æ–¹å¼ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¯å‚è€ƒ `.env.example`ï¼‰ï¼š

```bash
# é‚®ä»¶é€šçŸ¥é…ç½®ï¼ˆå¯é€‰ï¼‰
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@vakao-ui.com
NOTIFICATION_EMAIL=admin@company.com

# Webhook é€šçŸ¥é…ç½®ï¼ˆå¯é€‰ï¼‰
WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# GitHub é›†æˆé…ç½®ï¼ˆå¯é€‰ï¼‰
GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

**é€šçŸ¥æ–¹å¼è¯´æ˜ï¼š**

- ğŸ–¥ï¸ **æ¡Œé¢é€šçŸ¥**ï¼šè‡ªåŠ¨å¯ç”¨ï¼Œæ— éœ€é…ç½®ï¼Œæ”¯æŒ Windows/macOS/Linux
- ğŸ“§ **é‚®ä»¶é€šçŸ¥**ï¼šå¯é€‰é…ç½®ï¼Œæ”¯æŒ SMTP åè®®
- ğŸ”— **Webhook é€šçŸ¥**ï¼šå¯é€‰é…ç½®ï¼Œæ”¯æŒ Slackã€Discord ç­‰ç¬¬ä¸‰æ–¹æœåŠ¡

#### è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰

å¦‚æœæ‚¨éœ€è¦ä½¿ç”¨ä¼ ç»Ÿçš„ç¯å¢ƒå˜é‡é…ç½®æ–¹å¼ï¼š

```bash
# ç§æœ‰åˆ¶å“ä»“åº“åœ°å€
NPM_REGISTRY=http://your-private-registry.com/repository/npm-private/

# è®¤è¯ä»¤ç‰Œï¼ˆå¯é€‰ï¼Œå¦‚æœä»“åº“éœ€è¦è®¤è¯ï¼‰
NPM_TOKEN=your-auth-token
```

#### é…ç½® npm è®¤è¯

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨ .npmrc æ–‡ä»¶**

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.npmrc` æ–‡ä»¶ï¼š

```
registry=http://your-private-registry.com/repository/npm-private/
//your-private-registry.com/repository/npm-private/:_authToken=your-auth-token
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨ npm login**

```bash
npm login --registry=http://your-private-registry.com/repository/npm-private/
```

**æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ npm config**

```bash
npm config set registry http://your-private-registry.com/repository/npm-private/
npm config set //your-private-registry.com/repository/npm-private/:_authToken your-auth-token
```

## å‘å¸ƒæµç¨‹

### ç»Ÿä¸€å‘å¸ƒç³»ç»Ÿ (æ¨è)

Vakao UI ç°åœ¨ä½¿ç”¨ç»Ÿä¸€çš„å‘å¸ƒç³»ç»Ÿï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œé›†æˆäº†æ‰©å±•ç³»ç»Ÿå’Œæ™ºèƒ½é€šçŸ¥åŠŸèƒ½ï¼Œæä¾›æ›´å¼ºå¤§å’Œä¾¿æ·çš„å‘å¸ƒç®¡ç†åŠŸèƒ½ã€‚

#### äº¤äº’å¼å‘å¸ƒï¼ˆæ¨èï¼‰

```bash
node scripts/publish.js
```

è¿è¡Œå‘å¸ƒè„šæœ¬åï¼Œç³»ç»Ÿä¼šå¼•å¯¼æ‚¨å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

1. **é€‰æ‹©å‘å¸ƒæ¨¡å¼**
   - å•ä¸ªåŒ…å‘å¸ƒ
   - æ‰¹é‡å‘å¸ƒ
   - ç‰ˆæœ¬åŒæ­¥
   - ä»…éƒ¨ç½²æ¨¡å¼

2. **é€‰æ‹©è¦å‘å¸ƒçš„åŒ…**
   - mainï¼ˆä¸»åŒ…ï¼‰
   - hooksï¼ˆç»„åˆå¼å‡½æ•°ï¼‰
   - utilsï¼ˆå·¥å…·å‡½æ•°ï¼‰

3. **è®¾ç½®ç‰ˆæœ¬å·**
   - è‡ªåŠ¨æ£€æµ‹å½“å‰ç‰ˆæœ¬
   - æ”¯æŒè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
   - å¯é€‰æ‹©é¢„å‘å¸ƒç‰ˆæœ¬
   - æ™ºèƒ½ç‰ˆæœ¬åŒæ­¥

4. **ç¡®è®¤å‘å¸ƒä¿¡æ¯**
   - æ˜¾ç¤ºå‘å¸ƒè®¡åˆ’
   - ç¡®è®¤ç‰ˆæœ¬å˜æ›´
   - å¼€å§‹å‘å¸ƒæµç¨‹
   - å®æ—¶è¿›åº¦æ˜¾ç¤º

#### å‘½ä»¤è¡Œå‚æ•°å‘å¸ƒ

å¯¹äºè‡ªåŠ¨åŒ–åœºæ™¯ï¼Œæ”¯æŒä¸°å¯Œçš„å‘½ä»¤è¡Œå‚æ•°ï¼š

**å‘å¸ƒæŒ‡å®šåŒ…ï¼š**

```bash
# å‘å¸ƒå¤šä¸ªåŒ…
node scripts/publish.js --packages hooks,utils

# å‘å¸ƒå•ä¸ªåŒ…
node scripts/publish.js --package hooks
```

**æµ‹è¯•æ¨¡å¼ï¼š**

```bash
node scripts/publish.js --dry-run
```

**åŒæ­¥ç‰ˆæœ¬å·ï¼š**

```bash
node scripts/publish.js --sync-version
```

**ä»…éƒ¨ç½²ï¼ˆä¸å‘å¸ƒåŒ…ï¼‰ï¼š**

```bash
node scripts/publish.js --deploy-only
```

**æŒ‡å®šéƒ¨ç½²ç­–ç•¥ï¼š**

```bash
node scripts/publish.js --deploy-strategy github-pages
node scripts/publish.js --deploy-strategy legacy-docs
```

**ç»„åˆä½¿ç”¨ï¼š**

```bash
node scripts/publish.js --package main --deploy --deploy-strategy github-pages
```

**æŸ¥çœ‹å¸®åŠ©ï¼š**

```bash
node scripts/publish.js --help
```

#### NPM è„šæœ¬å¿«æ·æ–¹å¼

ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œé¡¹ç›®æä¾›äº†é¢„å®šä¹‰çš„ npm è„šæœ¬ï¼š

**äº¤äº’å¼å‘å¸ƒï¼š**

```bash
npm run publish
```

**å‘å¸ƒå•ä¸ªåŒ…ï¼š**

```bash
# å‘å¸ƒä¸»åŒ…ï¼ˆç»„ä»¶åº“ï¼‰
npm run publish:main
npm run publish:main:dry-run

# å‘å¸ƒ hooks åŒ…
npm run publish:hooks
npm run publish:hooks:dry-run

# å‘å¸ƒ utils åŒ…
npm run publish:utils
npm run publish:utils:dry-run
```

**æ‰¹é‡å‘å¸ƒï¼š**

```bash
# å‘å¸ƒæ‰€æœ‰åŒ…
npm run publish:all
npm run publish:all:dry-run

# åŒæ­¥ç‰ˆæœ¬å·å‘å¸ƒ
npm run publish:sync
npm run publish:sync:dry-run
```

**æµ‹è¯•æ¨¡å¼ï¼š**

```bash
npm run publish:dry-run
```

**ä»…éƒ¨ç½²ï¼š**

```bash
npm run deploy:only
```

**æµ‹è¯•æ¡Œé¢é€šçŸ¥ï¼š**

```bash
npm run test:notification
```

### æ–°ç³»ç»Ÿç‰¹æ€§

#### ç»Ÿä¸€å…¥å£

- æ‰€æœ‰å‘å¸ƒæ“ä½œé€šè¿‡å•ä¸€è„šæœ¬ `scripts/publish.js` å®Œæˆ
- æ”¯æŒäº¤äº’å¼å’Œå‘½ä»¤è¡Œä¸¤ç§ä½¿ç”¨æ–¹å¼
- æä¾›ä¸°å¯Œçš„é…ç½®é€‰é¡¹å’Œå‚æ•°
- é›†æˆæ‰©å±•ç³»ç»Ÿï¼Œæ”¯æŒè‡ªå®šä¹‰åŠŸèƒ½

#### æ¨¡å—åŒ–æ¶æ„

- **å‘å¸ƒå¼•æ“ï¼ˆPublishEngineï¼‰**ï¼šè´Ÿè´£åŒ…çš„æ„å»ºå’Œå‘å¸ƒ
- **éƒ¨ç½²å¼•æ“ï¼ˆDeploymentEngineï¼‰**ï¼šè´Ÿè´£æ–‡æ¡£éƒ¨ç½²å’Œå¤šç­–ç•¥æ”¯æŒ
- **æ‰©å±•ç®¡ç†å™¨ï¼ˆExtensionManagerï¼‰**ï¼šç®¡ç†æ‰©å±•ç”Ÿå‘½å‘¨æœŸå’Œé’©å­ç³»ç»Ÿ
- **äº¤äº’ç•Œé¢ï¼ˆInteractiveInterfaceï¼‰**ï¼šæä¾›ç”¨æˆ·å‹å¥½çš„äº¤äº’ä½“éªŒ

#### æ‰©å±•ç³»ç»Ÿ

- **æ’ä»¶åŒ–æ¶æ„**ï¼šæ”¯æŒè‡ªå®šä¹‰æ‰©å±•å¼€å‘
- **é’©å­æœºåˆ¶**ï¼šbeforeDeployã€afterDeployã€onError ç­‰ç”Ÿå‘½å‘¨æœŸé’©å­
- **å†…ç½®æ‰©å±•**ï¼š
  - GitHub é›†æˆæ‰©å±•ï¼šæ£€æŸ¥æœªæ¨é€æäº¤ã€è‡ªåŠ¨åˆ›å»º Release
  - é€šçŸ¥æ‰©å±•ï¼šå¤šç§é€šçŸ¥æ–¹å¼æ”¯æŒ
  - ä¼ ç»Ÿéƒ¨ç½²æ‰©å±•ï¼šå…¼å®¹åŸæœ‰éƒ¨ç½²æµç¨‹
- **æ‰©å±•ç›®å½•**ï¼š`scripts/extensions/` å’Œ `scripts/plugins/`ï¼ˆåˆ«åï¼‰

#### æ‰¹é‡å‘å¸ƒ

- æ”¯æŒä¸€æ¬¡æ€§å‘å¸ƒå¤šä¸ªåŒ…
- æ™ºèƒ½ä¾èµ–å…³ç³»å¤„ç†å’Œæ’åº
- å¹¶è¡Œæ„å»ºä¼˜åŒ–
- å‘å¸ƒç»“æœç»Ÿè®¡å’ŒæŠ¥å‘Š

#### ç‰ˆæœ¬åŒæ­¥

- è‡ªåŠ¨åŒæ­¥æ‰€æœ‰åŒ…çš„ç‰ˆæœ¬å·
- æ”¯æŒè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
- ç‰ˆæœ¬å†²çªæ£€æµ‹å’Œè§£å†³
- æ™ºèƒ½ç‰ˆæœ¬å·å»ºè®®

#### æµ‹è¯•æ¨¡å¼

- `--dry-run` å‚æ•°æ”¯æŒ
- æ¨¡æ‹Ÿå‘å¸ƒæµç¨‹ï¼Œä¸å®é™…å‘å¸ƒ
- éªŒè¯é…ç½®å’Œä¾èµ–
- æµ‹è¯•é€šçŸ¥åŠŸèƒ½

#### ç§æœ‰ä»“åº“

- æ”¯æŒç§æœ‰ npm ä»“åº“
- çµæ´»çš„è®¤è¯é…ç½®
- å¤šä»“åº“æ”¯æŒ
- è‡ªåŠ¨ä»“åº“æ£€æµ‹

#### äº¤äº’å¼ç•Œé¢

- ç¾è§‚çš„å‘½ä»¤è¡Œç•Œé¢
- å®æ—¶è¿›åº¦æ˜¾ç¤º
- é”™è¯¯ä¿¡æ¯å‹å¥½æç¤º
- ASCII è‰ºæœ¯å­—æ¨ªå¹…
- å½©è‰²æ—¥å¿—è¾“å‡º

#### æ™ºèƒ½é€šçŸ¥ç³»ç»Ÿ

- **æ¡Œé¢é€šçŸ¥**ï¼š
  - è‡ªåŠ¨æ£€æµ‹éƒ¨ç½²çŠ¶æ€å¹¶å‘é€ç›¸åº”é€šçŸ¥
  - æ”¯æŒ Windowsã€macOS å’Œ Linux ç³»ç»Ÿ
  - é€šè¿‡ `node-notifier` åº“å®ç°è·¨å¹³å°æ”¯æŒ
  - éƒ¨ç½²å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯è¯¦æƒ…
  - è‡ªå®šä¹‰åº”ç”¨åç§°å’Œå›¾æ ‡
- **é‚®ä»¶é€šçŸ¥**ï¼š
  - æ”¯æŒ SMTP åè®®
  - HTML æ ¼å¼é‚®ä»¶æ¨¡æ¿
  - å¯é…ç½®å‘é€æ–¹å’Œæ¥æ”¶æ–¹
- **Webhook é€šçŸ¥**ï¼š
  - æ”¯æŒ Slackã€Discord ç­‰ç¬¬ä¸‰æ–¹æœåŠ¡
  - JSON æ ¼å¼æ•°æ®æ¨é€
  - å¯é…ç½®è¯·æ±‚æ–¹æ³•å’Œå¤´éƒ¨
- **é€šçŸ¥è§¦å‘æ—¶æœº**ï¼š
  - å‘å¸ƒæˆåŠŸ/å¤±è´¥
  - éƒ¨ç½²æˆåŠŸ/å¤±è´¥
  - é”™è¯¯å¤„ç†

#### éƒ¨ç½²ç­–ç•¥

- **GitHub Pages**ï¼šè‡ªåŠ¨éƒ¨ç½²åˆ° GitHub Pages
- **Legacy Docs**ï¼šå…¼å®¹ä¼ ç»Ÿæ–‡æ¡£éƒ¨ç½²æ–¹å¼
- **æ™ºèƒ½ç­–ç•¥é€‰æ‹©**ï¼šæ ¹æ®å‘å¸ƒç»“æœè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„éƒ¨ç½²ç­–ç•¥
- **éƒ¨ç½²ç»“æœéªŒè¯**ï¼šè‡ªåŠ¨æ£€æŸ¥éƒ¨ç½²çŠ¶æ€å’Œå¯è®¿é—®æ€§

## å‘å¸ƒæ­¥éª¤è¯¦è§£

### 1. é€‰æ‹©å‘å¸ƒæ¨¡å¼

è¿è¡Œå‘å¸ƒè„šæœ¬åï¼Œç³»ç»Ÿä¼šæä¾›ä»¥ä¸‹é€‰é¡¹ï¼š

- **äº¤äº’å¼é€‰æ‹©**: æ‰‹åŠ¨é€‰æ‹©è¦å‘å¸ƒçš„åŒ…
- **å…¨éƒ¨å‘å¸ƒ**: å‘å¸ƒæ‰€æœ‰å¯ç”¨çš„åŒ…
- **æŒ‡å®šåŒ…å‘å¸ƒ**: é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šåŒ…

### 2. ç‰ˆæœ¬ç®¡ç†

ç³»ç»Ÿæ”¯æŒä¸¤ç§ç‰ˆæœ¬ç®¡ç†æ¨¡å¼ï¼š

- **åŒæ­¥ç‰ˆæœ¬**: æ‰€æœ‰åŒ…ä½¿ç”¨ç›¸åŒçš„ç‰ˆæœ¬å·
- **ç‹¬ç«‹ç‰ˆæœ¬**: æ¯ä¸ªåŒ…å¯ä»¥æœ‰ä¸åŒçš„ç‰ˆæœ¬å·

### 3. æ„å»ºå’Œå‘å¸ƒ

å¯¹äºæ¯ä¸ªé€‰ä¸­çš„åŒ…ï¼Œç³»ç»Ÿä¼šï¼š

1. æ£€æŸ¥å½“å‰ç‰ˆæœ¬
2. æç¤ºè¾“å…¥æ–°ç‰ˆæœ¬å·
3. æ›´æ–° package.json
4. æ‰§è¡Œæ„å»ºå‘½ä»¤
5. å‡†å¤‡å‘å¸ƒæ–‡ä»¶
6. å‘å¸ƒåˆ°åˆ¶å“ä»“åº“

## å¯å‘å¸ƒçš„åŒ…

å½“å‰æ”¯æŒå‘å¸ƒçš„åŒ…ï¼š

- **vakao-ui**: ç»„ä»¶åº“ä¸»åŒ…ï¼ˆåŒ…å«æ‰€æœ‰ç»„ä»¶ï¼‰
- **@vakao-ui/hooks**: Vue 3 ç»„åˆå¼å‡½æ•°åº“
- **@vakao-ui/utils**: é€šç”¨å·¥å…·å‡½æ•°åº“

## ç‰ˆæœ¬è§„èŒƒ

å»ºè®®éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/) è§„èŒƒï¼š

- **ä¸»ç‰ˆæœ¬å·**: ä¸å…¼å®¹çš„ API ä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·**: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å·**: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

ç¤ºä¾‹ï¼š

- `1.0.0` â†’ `1.0.1` (ä¿®å¤ bug)
- `1.0.1` â†’ `1.1.0` (æ–°å¢åŠŸèƒ½)
- `1.1.0` â†’ `2.0.0` (ç ´åæ€§æ›´æ”¹)

## æµ‹è¯•æ¨¡å¼

åœ¨æ­£å¼å‘å¸ƒå‰ï¼Œå»ºè®®ä½¿ç”¨æµ‹è¯•æ¨¡å¼éªŒè¯ï¼š

```bash
node scripts/publish.js --dry-run
```

æµ‹è¯•æ¨¡å¼ä¼šæ‰§è¡Œæ‰€æœ‰æ­¥éª¤ä½†ä¸ä¼šå®é™…å‘å¸ƒï¼Œç”¨äºï¼š

- éªŒè¯æ„å»ºè¿‡ç¨‹
- æ£€æŸ¥ç‰ˆæœ¬å·
- ç¡®è®¤å‘å¸ƒé…ç½®

## æ•…éšœæ’é™¤

### ç§æœ‰ä»“åº“ç›¸å…³é—®é¢˜

**é—®é¢˜1: è®¤è¯å¤±è´¥**

```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $NPM_REGISTRY
echo $NPM_TOKEN

# é‡æ–°é…ç½®è®¤è¯
npm login --registry=http://your-private-registry.com/repository/npm-private/
```

**é—®é¢˜2: ä»“åº“è¿æ¥å¤±è´¥**

```bash
# æµ‹è¯•ä»“åº“è¿æ¥
npm ping --registry=http://your-private-registry.com/repository/npm-private/

# æ£€æŸ¥ç½‘ç»œå’Œé˜²ç«å¢™è®¾ç½®
curl -I http://your-private-registry.com/repository/npm-private/
```

**é—®é¢˜3: é‡æ–°é…ç½®è®¤è¯**

```bash
# æ¸…é™¤ç°æœ‰é…ç½®
npm config delete registry
npm config delete //your-private-registry.com/repository/npm-private/:_authToken

# é‡æ–°è®¾ç½®
npm config set registry http://your-private-registry.com/repository/npm-private/
npm login --registry=http://your-private-registry.com/repository/npm-private/
```

### å¸¸è§é—®é¢˜

**é—®é¢˜1: ç‰ˆæœ¬å·å·²å­˜åœ¨**

- æ£€æŸ¥è¿œç¨‹ä»“åº“ä¸­çš„ç‰ˆæœ¬
- ä½¿ç”¨ `--sync-version` å‚æ•°åŒæ­¥ç‰ˆæœ¬
- ä½¿ç”¨æ›´é«˜çš„ç‰ˆæœ¬å·
- ç¡®è®¤æ˜¯å¦éœ€è¦æ›´æ–°ç°æœ‰ç‰ˆæœ¬

**é—®é¢˜2: æ„å»ºå¤±è´¥**

- æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…å®Œæ•´ï¼š`pnpm install`
- ç¡®è®¤æ„å»ºå‘½ä»¤æ˜¯å¦æ­£ç¡®
- æ¸…ç†ç¼“å­˜ï¼š`pnpm run clean`
- é‡æ–°å®‰è£…ä¾èµ–ï¼š`rm -rf node_modules && pnpm install`
- æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯å’Œæ„å»ºæ—¥å¿—

**é—®é¢˜3: æƒé™ä¸è¶³**

- ç¡®è®¤è´¦æˆ·æœ‰å‘å¸ƒæƒé™ï¼š`npm whoami`
- æ£€æŸ¥åŒ…åæ˜¯å¦è¢«å ç”¨
- æ£€æŸ¥åŒ…çš„ `publishConfig` é…ç½®
- è”ç³»ä»“åº“ç®¡ç†å‘˜

**é—®é¢˜4: è¾“å…¥é—®é¢˜ï¼ˆWindows ç¯å¢ƒï¼‰**

- å¦‚æœåœ¨äº¤äº’å¼æ¨¡å¼ä¸‹å‡ºç°è¾“å…¥é‡å¤æˆ–åˆ é™¤é”®å¼‚å¸¸
- è¿è¡Œæµ‹è¯•å·¥å…·éªŒè¯ï¼š`node scripts/test-input.js`
- ä½¿ç”¨ PowerShell æˆ– Git Bash
- ç¡®ä¿ç»ˆç«¯æ”¯æŒ UTF-8 ç¼–ç 
- æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬çš„ Node.js
- é—®é¢˜å·²åœ¨ v2.0.0 ä¸­ä¿®å¤ï¼Œä½¿ç”¨ä¼˜åŒ–çš„ readline é…ç½®

**é—®é¢˜5: æ¡Œé¢é€šçŸ¥é—®é¢˜**

_é€šçŸ¥æœªæ˜¾ç¤ºï¼š_

- ç¡®è®¤ `node-notifier` ä¾èµ–å·²å®‰è£…ï¼š`pnpm list node-notifier`
- æ£€æŸ¥ç³»ç»Ÿé€šçŸ¥æƒé™è®¾ç½®
- éªŒè¯é€šçŸ¥æ‰©å±•æ˜¯å¦æ­£ç¡®åŠ è½½
- æµ‹è¯•æ¡Œé¢é€šçŸ¥åŠŸèƒ½ï¼š`pnpm run test:notification`
- åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œç¡®ä¿é€šçŸ¥æœåŠ¡å·²å¯ç”¨

_éƒ¨ç½²å¤±è´¥æ—¶é€šçŸ¥æœªè§¦å‘ï¼š_

- ç¡®ä¿é”™è¯¯å¤„ç†æµç¨‹æ­£ç¡®ä¼ æ’­é”™è¯¯
- æ£€æŸ¥ `onError` é’©å­æ˜¯å¦æ­£ç¡®æ³¨å†Œ
- éªŒè¯éƒ¨ç½²å¼•æ“çš„é”™è¯¯å¤„ç†é€»è¾‘
- æŸ¥çœ‹æ‰©å±•åŠ è½½æ—¥å¿—

**é—®é¢˜6: æ‰©å±•ç³»ç»Ÿé—®é¢˜**

_æ‰©å±•æœªåŠ è½½ï¼š_

- æ£€æŸ¥æ–‡ä»¶è·¯å¾„å’Œå‘½å
- ç¡®ä¿æ‰©å±•ç±»æ­£ç¡®å¯¼å‡º
- æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- éªŒè¯æ‰©å±•ç›®å½•æƒé™

_é’©å­æœªæ‰§è¡Œï¼š_

- ç¡®ä¿åœ¨ `initialize` æ–¹æ³•ä¸­æ³¨å†Œäº†é’©å­
- æ£€æŸ¥é’©å­åç§°æ˜¯å¦æ­£ç¡®
- ç¡®ä¿é’©å­æ–¹æ³•å­˜åœ¨ä¸”å¯è°ƒç”¨
- æŸ¥çœ‹æ‰©å±•ç®¡ç†å™¨æ—¥å¿—

_æ‰©å±•æŠ¥é”™ï¼š_

- æ·»åŠ  try-catch é”™è¯¯å¤„ç†
- æ£€æŸ¥ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…
- éªŒè¯é…ç½®å’Œç¯å¢ƒå˜é‡
- æŸ¥çœ‹è¯¦ç»†é”™è¯¯å †æ ˆ

**é—®é¢˜7: éƒ¨ç½²é—®é¢˜**

_GitHub Pages éƒ¨ç½²å¤±è´¥ï¼š_

- æ£€æŸ¥ GitHub ä»“åº“æƒé™
- éªŒè¯ Git çŠ¶æ€å’Œæœªæ¨é€çš„æäº¤
- ç¡®è®¤ `gh-pages` åˆ†æ”¯çŠ¶æ€
- æ£€æŸ¥æ„å»ºäº§ç‰©æ˜¯å¦æ­£ç¡®ç”Ÿæˆ

_éƒ¨ç½²ç­–ç•¥é€‰æ‹©é”™è¯¯ï¼š_

- ä½¿ç”¨ `--deploy-strategy` å‚æ•°æŒ‡å®šç­–ç•¥
- æ£€æŸ¥å¯ç”¨çš„éƒ¨ç½²ç­–ç•¥åˆ—è¡¨
- éªŒè¯ç­–ç•¥é…ç½®æ˜¯å¦æ­£ç¡®

**é—®é¢˜8: è°ƒè¯•æ¨¡å¼**

å¯ç”¨è¯¦ç»†æ—¥å¿—è¿›è¡Œé—®é¢˜è¯Šæ–­ï¼š

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
DEBUG=* node scripts/publish.js

# æµ‹è¯•æ¨¡å¼ï¼ˆä¸å®é™…å‘å¸ƒï¼‰
node scripts/publish.js --dry-run

# æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
node scripts/publish.js --help
```

## æœ€ä½³å®è·µ

### å‘å¸ƒå‰æ£€æŸ¥

1. **ä»£ç è´¨é‡**
   - è¿è¡Œæµ‹è¯•ï¼š`pnpm test`
   - ä»£ç æ£€æŸ¥ï¼š`pnpm run lint`
   - ç±»å‹æ£€æŸ¥ï¼š`pnpm run type-check`
   - æ„å»ºéªŒè¯ï¼š`pnpm run build`

2. **ç‰ˆæœ¬ç®¡ç†**
   - éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
   - æ›´æ–° CHANGELOG.md
   - ç¡®è®¤ç‰ˆæœ¬å·é€’å¢æ­£ç¡®
   - ä½¿ç”¨ `--sync-version` ä¿æŒç‰ˆæœ¬ä¸€è‡´æ€§

3. **ä¾èµ–æ£€æŸ¥**
   - ç¡®è®¤æ‰€æœ‰ä¾èµ–å·²å®‰è£…ï¼š`pnpm install`
   - æ£€æŸ¥ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§
   - æ¸…ç†æ— ç”¨ä¾èµ–ï¼š`pnpm prune`
   - éªŒè¯ peer dependencies

4. **Git çŠ¶æ€æ£€æŸ¥**
   - ç¡®ä¿æ‰€æœ‰æ›´æ”¹å·²æäº¤
   - æ¨é€åˆ°è¿œç¨‹ä»“åº“
   - æ£€æŸ¥åˆ†æ”¯çŠ¶æ€

### ç‰ˆæœ¬ç®¡ç†

#### è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

éµå¾ª [Semantic Versioning](https://semver.org/) è§„èŒƒï¼š

- **MAJOR**: ä¸å…¼å®¹çš„ API ä¿®æ”¹
- **MINOR**: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **PATCH**: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

#### ç‰ˆæœ¬å·ç¤ºä¾‹

```
1.0.0 -> 1.0.1 (ä¿®å¤ bug)
1.0.1 -> 1.1.0 (æ–°å¢åŠŸèƒ½)
1.1.0 -> 2.0.0 (ç ´åæ€§æ›´æ”¹)
```

#### ç‰ˆæœ¬åŒæ­¥ç­–ç•¥

```bash
# åŒæ­¥æ‰€æœ‰åŒ…ç‰ˆæœ¬
pnpm run publish:sync

# æµ‹è¯•ç‰ˆæœ¬åŒæ­¥
pnpm run publish:sync:dry-run
```

### æµ‹è¯•éªŒè¯

#### å‘å¸ƒå‰æµ‹è¯•

```bash
# å®Œæ•´æµ‹è¯•æµç¨‹
pnpm run test:all

# æ„å»ºæµ‹è¯•
pnpm run build

# å‘å¸ƒæµ‹è¯•ï¼ˆä¸å®é™…å‘å¸ƒï¼‰
pnpm run publish:dry-run

# æµ‹è¯•æ¡Œé¢é€šçŸ¥
pnpm run test:notification
```

#### å‘å¸ƒåéªŒè¯

1. æ£€æŸ¥åŒ…æ˜¯å¦æ­£ç¡®å‘å¸ƒåˆ°ä»“åº“
2. éªŒè¯åŒ…çš„å®‰è£…å’Œä½¿ç”¨
3. ç¡®è®¤æ–‡æ¡£æ˜¯å¦æ­£ç¡®æ›´æ–°
4. éªŒè¯æ¡Œé¢é€šçŸ¥æ˜¯å¦æ­£å¸¸å‘é€
5. æ£€æŸ¥éƒ¨ç½²ç»“æœå’Œå¯è®¿é—®æ€§

### é€šçŸ¥ç³»ç»Ÿé…ç½®

#### æ¡Œé¢é€šçŸ¥

æ¡Œé¢é€šçŸ¥é»˜è®¤å¯ç”¨ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼š

```bash
# æµ‹è¯•æ¡Œé¢é€šçŸ¥
pnpm run test:notification
```

#### é‚®ä»¶é€šçŸ¥é…ç½®

åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®é‚®ä»¶é€šçŸ¥ï¼š

```bash
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@vakao-ui.com
NOTIFICATION_EMAIL=admin@company.com
```

#### Webhook é€šçŸ¥é…ç½®

é…ç½®ç¬¬ä¸‰æ–¹æœåŠ¡é€šçŸ¥ï¼š

```bash
# Slack Webhook
WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Discord Webhook
WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK
```

### æ‰©å±•å¼€å‘

#### åˆ›å»ºè‡ªå®šä¹‰æ‰©å±•

1. **ä½¿ç”¨æ¨¡æ¿åˆ›å»º**ï¼š

   ```bash
   node scripts/publish.js --create-extension my-extension
   ```

2. **æ‰‹åŠ¨åˆ›å»º**ï¼š

   ```javascript
   // scripts/extensions/my-extension.js
   class MyExtension {
     constructor(config) {
       this.name = "my-extension";
       this.version = "1.0.0";
     }

     async initialize(extensionManager) {
       extensionManager.registerHook(
         "afterDeploy",
         this.onSuccess.bind(this),
         this.name,
       );
     }

     async onSuccess(context) {
       console.log("éƒ¨ç½²æˆåŠŸï¼");
     }
   }

   module.exports = MyExtension;
   ```

#### æ‰©å±•æœ€ä½³å®è·µ

1. **é”™è¯¯å¤„ç†**ï¼š

   ```javascript
   async onDeploySuccess(context) {
     try {
       await this.doSomething();
     } catch (error) {
       console.error(`${this.name} æ‰©å±•æ‰§è¡Œå¤±è´¥:`, error.message);
       // ä¸è¦æŠ›å‡ºé”™è¯¯ï¼Œé¿å…å½±å“ä¸»æµç¨‹
     }
   }
   ```

2. **é…ç½®ç®¡ç†**ï¼š

   ```javascript
   constructor(config) {
     this.config = {
       enabled: process.env.MY_EXTENSION_ENABLED !== 'false',
       apiKey: process.env.MY_API_KEY,
       timeout: parseInt(process.env.MY_TIMEOUT) || 5000
     };
   }
   ```

3. **å¼‚æ­¥æ“ä½œ**ï¼š
   ```javascript
   async onDeploySuccess(context) {
     const results = await Promise.allSettled([
       this.sendNotification(),
       this.updateDatabase(),
       this.callWebhook()
     ]);
   }
   ```

### æ–‡æ¡£ç»´æŠ¤

1. **åŠæ—¶æ›´æ–°**
   - æ–°åŠŸèƒ½æ·»åŠ æ–‡æ¡£
   - API å˜æ›´æ›´æ–°è¯´æ˜
   - ç¤ºä¾‹ä»£ç ä¿æŒæœ€æ–°
   - æ‰©å±•å¼€å‘æŒ‡å—

2. **ç‰ˆæœ¬è®°å½•**
   - ç»´æŠ¤è¯¦ç»†çš„ CHANGELOG
   - è®°å½•ç ´åæ€§æ›´æ”¹
   - æä¾›è¿ç§»æŒ‡å—
   - æ‰©å±•å˜æ›´è®°å½•

3. **è‡ªåŠ¨åŒ–æ–‡æ¡£**
   - ä½¿ç”¨ JSDoc æ³¨é‡Š
   - è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£
   - é›†æˆåˆ°å‘å¸ƒæµç¨‹

## è¿ç§»è¯´æ˜

å¦‚æœæ‚¨ä¹‹å‰ä½¿ç”¨çš„æ˜¯æ—§ç‰ˆå‘å¸ƒè„šæœ¬ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿ç§»åˆ°æ–°çš„ç»Ÿä¸€å‘å¸ƒç³»ç»Ÿï¼š

### 1. ç³»ç»Ÿå‡çº§

æ–°ç‰ˆç»Ÿä¸€å‘å¸ƒç³»ç»Ÿå·²é›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œæ— éœ€é¢å¤–å®‰è£…ã€‚ä¸»è¦å˜æ›´ï¼š

- ç»Ÿä¸€å…¥å£ï¼š`scripts/publish.js`
- æ¨¡å—åŒ–æ¶æ„ï¼šå‘å¸ƒå¼•æ“ã€éƒ¨ç½²å¼•æ“ã€æ‰©å±•ç®¡ç†å™¨
- æ‰©å±•ç³»ç»Ÿï¼šæ”¯æŒè‡ªå®šä¹‰æ‰©å±•å¼€å‘
- æ™ºèƒ½é€šçŸ¥ï¼šæ¡Œé¢é€šçŸ¥ã€é‚®ä»¶ã€Webhook

### 2. é…ç½®è¿ç§»

#### ç¯å¢ƒå˜é‡é…ç½®

æ–°ç³»ç»Ÿä¿æŒå‘åå…¼å®¹ï¼ŒåŒæ—¶æ”¯æŒæ›´å¤šé…ç½®é€‰é¡¹ï¼š

```bash
# åŸºç¡€é…ç½®ï¼ˆä¿æŒå…¼å®¹ï¼‰
NPM_REGISTRY=https://your-registry.com/
NPM_TOKEN=your-token

# æ–°å¢é€šçŸ¥é…ç½®
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
NOTIFICATION_EMAIL=admin@company.com
WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK

# GitHub é›†æˆ
GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

#### åŒ…ç®¡ç†å™¨è¿ç§»

æ¨èä» npm è¿ç§»åˆ° pnpmï¼š

```bash
# å®‰è£… pnpm
npm install -g pnpm

# è¿ç§»ä¾èµ–
rm -rf node_modules package-lock.json
pnpm install
```

### 3. å‘½ä»¤æ›´æ–°

#### å…¼å®¹æ€§å‘½ä»¤

æ‰€æœ‰æ—§å‘½ä»¤ä¿æŒå…¼å®¹ï¼š

```bash
# æ—§å‘½ä»¤ï¼ˆä»ç„¶å¯ç”¨ï¼‰
npm run publish:main
npm run publish:hooks
npm run publish:utils

# æ¨èä½¿ç”¨ pnpm
pnpm run publish:main
pnpm run publish:hooks
pnpm run publish:utils
```

#### æ–°å¢å‘½ä»¤

```bash
# ç»Ÿä¸€äº¤äº’å¼å‘å¸ƒ
pnpm run publish

# æ‰¹é‡å‘å¸ƒ
pnpm run publish:all

# ç‰ˆæœ¬åŒæ­¥
pnpm run publish:sync

# ä»…éƒ¨ç½²
pnpm run deploy:only

# æµ‹è¯•æ¨¡å¼
pnpm run publish:dry-run

# æµ‹è¯•é€šçŸ¥
pnpm run test:notification
```

### 4. åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½         | æ—§ç³»ç»Ÿ | æ–°ç³»ç»Ÿ | è¯´æ˜            |
| ------------ | ------ | ------ | --------------- |
| å•åŒ…å‘å¸ƒ     | âœ…     | âœ…     | ä¿æŒå…¼å®¹        |
| æ‰¹é‡å‘å¸ƒ     | âŒ     | âœ…     | æ–°å¢åŠŸèƒ½        |
| äº¤äº’å¼ç•Œé¢   | âŒ     | âœ…     | ç¾è§‚çš„ CLI ç•Œé¢ |
| ç‰ˆæœ¬åŒæ­¥     | âŒ     | âœ…     | æ™ºèƒ½ç‰ˆæœ¬ç®¡ç†    |
| æµ‹è¯•æ¨¡å¼     | âŒ     | âœ…     | dry-run æ”¯æŒ    |
| æ¡Œé¢é€šçŸ¥     | âŒ     | âœ…     | è·¨å¹³å°é€šçŸ¥      |
| é‚®ä»¶é€šçŸ¥     | âŒ     | âœ…     | SMTP æ”¯æŒ       |
| Webhook é€šçŸ¥ | âŒ     | âœ…     | ç¬¬ä¸‰æ–¹é›†æˆ      |
| æ‰©å±•ç³»ç»Ÿ     | âŒ     | âœ…     | æ’ä»¶åŒ–æ¶æ„      |
| GitHub é›†æˆ  | âŒ     | âœ…     | è‡ªåŠ¨åŒ–å·¥ä½œæµ    |
| éƒ¨ç½²ç­–ç•¥     | å•ä¸€   | å¤šç§   | çµæ´»çš„éƒ¨ç½²é€‰é¡¹  |
| ç§æœ‰ä»“åº“     | âœ…     | âœ…     | å¢å¼ºæ”¯æŒ        |
| é”™è¯¯å¤„ç†     | åŸºç¡€   | å¢å¼º   | è¯¦ç»†é”™è¯¯ä¿¡æ¯    |
| æ—¥å¿—ç³»ç»Ÿ     | ç®€å•   | ä¸°å¯Œ   | å½©è‰²æ—¥å¿—è¾“å‡º    |

### 5. è¿ç§»æ­¥éª¤

#### æ­¥éª¤ 1ï¼šå¤‡ä»½é…ç½®

```bash
# å¤‡ä»½ç°æœ‰é…ç½®
cp .env .env.backup
cp package.json package.json.backup
```

#### æ­¥éª¤ 2ï¼šæ›´æ–°ä¾èµ–

```bash
# å®‰è£…æ–°ä¾èµ–
pnpm install

# éªŒè¯å®‰è£…
pnpm list node-notifier
```

#### æ­¥éª¤ 3ï¼šæµ‹è¯•æ–°ç³»ç»Ÿ

```bash
# æµ‹è¯•å‘å¸ƒæµç¨‹ï¼ˆä¸å®é™…å‘å¸ƒï¼‰
pnpm run publish:dry-run

# æµ‹è¯•æ¡Œé¢é€šçŸ¥
pnpm run test:notification

# æµ‹è¯•äº¤äº’å¼ç•Œé¢
node scripts/publish.js --help
```

#### æ­¥éª¤ 4ï¼šé…ç½®é€šçŸ¥

```bash
# æ·»åŠ é€šçŸ¥é…ç½®åˆ° .env
echo "NOTIFICATION_EMAIL=admin@company.com" >> .env
echo "WEBHOOK_URL=https://your-webhook-url" >> .env
```

#### æ­¥éª¤ 5ï¼šéªŒè¯è¿ç§»

```bash
# ä½¿ç”¨æ–°ç³»ç»Ÿå‘å¸ƒæµ‹è¯•åŒ…
pnpm run publish:main:dry-run

# æ£€æŸ¥æ‰€æœ‰åŠŸèƒ½
node scripts/publish.js --help
```

### 6. å›æ»šæ–¹æ¡ˆ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ä¸´æ—¶å›æ»šï¼š

```bash
# æ¢å¤å¤‡ä»½é…ç½®
cp .env.backup .env
cp package.json.backup package.json

# é‡æ–°å®‰è£…ä¾èµ–
npm install

# ä½¿ç”¨æ—§å‘½ä»¤
npm run publish:main
```

### 7. è·å–å¸®åŠ©

- æŸ¥çœ‹è¯¦ç»†å¸®åŠ©ï¼š`node scripts/publish.js --help`
- æ‰©å±•å¼€å‘æŒ‡å—ï¼š`scripts/extensions/README.md`
- é—®é¢˜åé¦ˆï¼šGitHub Issues

æ–°ç³»ç»Ÿå®Œå…¨å‘åå…¼å®¹ï¼Œæ‚¨å¯ä»¥ç»§ç»­ä½¿ç”¨åŸæœ‰çš„å‘½ä»¤ï¼ŒåŒæ—¶é€æ­¥é‡‡ç”¨æ–°åŠŸèƒ½ã€‚å»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯æ–°ç³»ç»Ÿï¼Œç¡®è®¤æ— è¯¯åå†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚

---

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³» Vakao UI å›¢é˜Ÿã€‚
